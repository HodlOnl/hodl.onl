<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="typography-styles" assetpath="../styles/"><template><style>h1, h2, h3, h4{text-transform:uppercase;letter-spacing:2px;margin-top:0;}</style></template></dom-module><dom-module id="crypto-price-quoter" assetpath="../elements/"><template><style include="typography-styles">:host{display:block;font-size:26px;font-family:sans-serif;}*{box-sizing:border-box;}[hidden]{display:none !important;}.container{display:flex;align-items:flex-start;flex-direction:column;}form{width:100%;display:flex;flex-direction:column;}form > *:not([invisible]),
      .history > *{padding:.5em;}form > input{margin-bottom:.5em;}form > *:not([invisible]){font-size:26px;}form > input{border:none;}form input:valid{outline-color:var(--app-primary-color);}form input:focus:required:invalid{outline-color:red;}form button{cursor:pointer;background:var(--app-button-color);color:white;text-align:left;border:none;}span[invisible]{opacity:0;margin-left:-100%;}.message,
      .history{opacity:1;margin-left:0;transition:opacity, margin-left .5s ease;width:100%;}h4{margin-bottom:0;}.history > small{background-color:var(--app-light-color);display:flex;align-items:center;justify-content:space-between;}.history button{border:none;background-color:var(--app-lightest-color);font-weight:bold;margin-left:1em;min-width:100px;}.error{color:red;}#successMsg > span{display:inline-block;border-bottom:1px dashed var(--app-secondary-color);}.message span[empty]{width:30px;}#successMsg{display:inline-block;}.offscreen{position:fixed;top:-10000px;left:-100000px;}</style><iron-ajax id="quoter" url="https://min-api.cryptocompare.com/data/price?fsym=[[_baseCurrencyUpper]]&amp;tsyms=[[_quoteCurrencyUpper]]" on-response="_onQuoteFetched" on-error="_onQuoteError"></iron-ajax><div class="container"><form id="theForm" on-submit="_onFormSubmit" on-input="_onFormInput"><label>How much is</label><input placeholder="amount" type="number" step=".00000001" min=".00000001" value="{{amount::input}}" required=""> <input id="baseCurrency" placeholder="of" type="text" list="baseList" pattern="[[_patternFromArray(coins)]]" value="{{baseCurrency::input}}" required=""> <input placeholder="as" type="text" list="quoteList" pattern="[[_patternFromArray(_quoteCurrencies)]]" value="{{quoteCurrency::input}}" required=""> <button id="submitter">calculate</button> <span class="message" invisible$="[[!errorMsg]]">[[errorMsg]]</span> <span class="message"><span id="successMsg"><span empty$="[[!amount]]">[[amount]]</span> <span empty$="[[!baseCurrency]]">[[baseCurrency]]</span> is <span empty$="[[!quoteAmount]]">[[quoteAmount]]</span> <span hidden$="[[_quoteIsFiat]]" empty$="[[!quoteCurrency]]">[[quoteCurrency]]</span></span><br>[[successMsg]]</span></form><span class="history" hidden$="[[_isEmpty(previousSucesses.*)]]"><h4><small>History:</small></h4><template is="dom-repeat" items="[[previousSucesses]]"><small>[[item.msg]] <button on-click="_onCopyClicked">copy amount</button> <input class="offscreen" value="[[item.quoteAmount]]" type="text"></small></template></span><datalist id="baseList"><template is="dom-repeat" items="[[coins]]"><option value="[[item]]"></option></template></datalist><datalist id="quoteList"><template is="dom-repeat" items="[[_quoteCurrencies]]"><option value="[[item]]"></option></template></datalist></div></template><script>class CryptoPriceQuoter extends Polymer.Element{static get is(){return'crypto-price-quoter'}static get properties(){return{coins:{type:Array,value:[]},_fiatQuoteCurrencies:{type:Array,value:()=>['USD','EUR']},_quoteCurrencies:{type:Array,computed:'_computeQuoteCurrencies(_fiatQuoteCurrencies, coins)'},amount:{type:String,value:''},quoteAmount:{type:String,value:''},baseCurrency:{type:String,value:''},_baseCurrencyUpper:{type:String,computed:'_toUpper(baseCurrency)'},quoteCurrency:{type:String,value:''},_quoteCurrencyUpper:{type:String,computed:'_toUpper(quoteCurrency)'},_quoteIsFiat:{type:String,computed:'_computeQuoteIsFiat(_quoteCurrencyUpper, _fiatQuoteCurrencies)'},successMsg:{type:String,value:''},previousSucesses:{type:Array,value:()=>[]},errorMsg:{type:String,value:''}}}_isEmpty(a){return _.isEmpty(a.base||a)}_join(a,b=','){return _.join(a,b)}_toUpper(a){return _.toUpper(a)}_computeQuoteCurrencies(a,b){return _.concat(a,b)}_computeQuoteIsFiat(a,b){return _.includes(b,a)}_patternFromArray(a){a=_.map(a,_.escapeRegExp);const b=_.map(a,_.lowerCase);return a.concat(b).join('|')}_onFormSubmit(a){a.preventDefault();this.$.theForm.checkValidity()&&(this.setProperties({errorMsg:'',successMsgs:''}),this.$.quoter.generateRequest())}_onFormInput(){this.set('quoteAmount','')}_onQuoteFetched(a,b){this.blur();const c=b.response,d=this.get('baseCurrency'),e=this.get('_quoteCurrencyUpper'),f=this._quoteIsFiat,g=this.get('amount'),h=parseFloat(g),i=c[e];if(i){const a=new Date;let b=h*i;b=f?b.toLocaleString(void 0,{currency:e,style:'currency'}):_.round(b,8),this.set('quoteAmount',b),this.set('successMsg',`${i} ${e} per ${d}`),this.unshift('previousSucesses',{quoteAmount:b,msg:`${this.$.successMsg.innerText.replace('is','was')} at 
                  ${a.toLocaleTimeString()}, 
                  ${a.toLocaleDateString()}`})}else this.set('errorMsg',`Something did not work right.`)}_onQuoteError(a){this.set('errorMsg',a.detail.request.response.message)}_onCopyClicked(a){a.target.parentElement.querySelector('input').select(),document.execCommand('copy')}}window.customElements.define(CryptoPriceQuoter.is,CryptoPriceQuoter);</script></dom-module></div><dom-module id="price-quoter-view"><template><style>:host{display:block;padding:10px;}</style><crypto-price-quoter coins="[[coins]]"></crypto-price-quoter></template><script>class PirceQuoterView extends Polymer.Element{static get is(){return'price-quoter-view'}}window.customElements.define(PirceQuoterView.is,PirceQuoterView);</script></dom-module></body></html>